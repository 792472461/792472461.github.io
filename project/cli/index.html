<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>从0到1实现sfs-cli | 一个不正经的博客</title>
    <meta name="description" content="By Songfengshuai">
    <link rel="stylesheet" href="/assets/style.cfcc141e.css">
    <link rel="modulepreload" href="/assets/Home.5ebeecc7.js">
    <link rel="modulepreload" href="/assets/app.65ddda17.js">
    <link rel="modulepreload" href="/assets/project_cli_index.md.a0883a47.lean.js">
    <link rel="modulepreload" href="/assets/app.65ddda17.js">
    <link rel="icon" href="/favicon.png">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="twitter:title" content="从0到1实现sfs-cli | 一个不正经的博客">
    <meta property="og:title" content="从0到1实现sfs-cli | 一个不正经的博客">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/" aria-label="一个不正经的博客, back to home" data-v-675d8756 data-v-4a583abe><!----> 一个不正经的博客</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/interview/" data-v-b8818f8c>前端面试汇总 <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/algorithm/" data-v-b8818f8c>数据结构与算法 <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-dropdown-link" data-v-eab3edfe data-v-56bf3a3f><button class="button" data-v-56bf3a3f><span class="button-text" data-v-56bf3a3f>前端工程化</span><span class="right button-arrow" data-v-56bf3a3f></span></button><ul class="dialog" data-v-56bf3a3f><!--[--><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item active" href="/project/cli/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>脚手架</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/project/gui/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>GUI</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/project/publish/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>自动化发布</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/project/test/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>自动化测试</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-eab3edfe><div class="nav-dropdown-link" data-v-eab3edfe data-v-56bf3a3f><button class="button" data-v-56bf3a3f><span class="button-text" data-v-56bf3a3f>Typescript</span><span class="right button-arrow" data-v-56bf3a3f></span></button><ul class="dialog" data-v-56bf3a3f><!--[--><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/typescript/basics/index" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>Typescript基础</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/typescript/senior/index" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>Typescript进阶</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/vue-analysis/" data-v-b8818f8c>Vue源码解析 <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/react-analysis/" data-v-b8818f8c>React源码解析 <!----></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/interview/" data-v-b8818f8c>前端面试汇总 <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/algorithm/" data-v-b8818f8c>数据结构与算法 <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-dropdown-link" data-v-eab3edfe data-v-56bf3a3f><button class="button" data-v-56bf3a3f><span class="button-text" data-v-56bf3a3f>前端工程化</span><span class="right button-arrow" data-v-56bf3a3f></span></button><ul class="dialog" data-v-56bf3a3f><!--[--><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item active" href="/project/cli/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>脚手架</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/project/gui/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>GUI</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/project/publish/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>自动化发布</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/project/test/" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>自动化测试</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-eab3edfe><div class="nav-dropdown-link" data-v-eab3edfe data-v-56bf3a3f><button class="button" data-v-56bf3a3f><span class="button-text" data-v-56bf3a3f>Typescript</span><span class="right button-arrow" data-v-56bf3a3f></span></button><ul class="dialog" data-v-56bf3a3f><!--[--><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/typescript/basics/index" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>Typescript基础</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/typescript/senior/index" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>Typescript进阶</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><!--]--></ul></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/vue-analysis/" data-v-b8818f8c>Vue源码解析 <!----></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item" href="/react-analysis/" data-v-b8818f8c>React源码解析 <!----></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><a class="sidebar-link-item" href="#准备工作">准备工作</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#脚手架实现原理">脚手架实现原理</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#脚手架的核心价值">脚手架的核心价值</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#脚手架开发流程">脚手架开发流程</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#脚手架使用流程">脚手架使用流程</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#脚手架开发难点">脚手架开发难点</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#脚手架雏形">脚手架雏形</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#npm-link标准流程">npm link标准流程</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#命令行参数解析">命令行参数解析</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#模块划分">模块划分</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#引入lerna">引入lerna</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#拆包">拆包</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#core-模块">core 模块</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><!-- TODO: make this button accessible --><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="从0到1实现sfs-cli" tabindex="-1">从0到1实现sfs-cli <a class="header-anchor" href="#从0到1实现sfs-cli" aria-hidden="true">#</a></h1><div class="tip custom-block"><p class="custom-block-title">最终功能</p><ol><li>初始化生成vue项目，组件</li><li>添加预设</li><li>集成前端监控系统</li><li>添加CI/CD、自动发布</li><li>实现GUI功能，可以添加工作区，打包发布自动化</li></ol></div><h2 id="准备工作" tabindex="-1">准备工作 <a class="header-anchor" href="#准备工作" aria-hidden="true">#</a></h2><h3 id="脚手架实现原理" tabindex="-1">脚手架实现原理 <a class="header-anchor" href="#脚手架实现原理" aria-hidden="true">#</a></h3><ol><li>脚手架的本质上只是一个操作系统的一个客户端，脚手架运行是依赖于node，node就是一个客户端，通过node去执行一系列的代码。</li><li>通过软链接可以链接到我们自己的js文件，执行这个文件</li><li>脚手架执行过程:</li><li>输入vue create xxx</li><li>在环境变量$path中查询vue命令(相当于执行which vue)</li><li>找到实际执行的文件</li><li>通过/usr/bin/env node执行文件</li></ol><h3 id="脚手架的核心价值" tabindex="-1">脚手架的核心价值 <a class="header-anchor" href="#脚手架的核心价值" aria-hidden="true">#</a></h3><ol><li>研发自动化：项目重复代码拷贝-&gt;git操作-&gt;发布上线等操作</li><li>研发标准化：项目创建的git flow、发布流程、发布回滚统一规范</li><li>研发数据化：可以统计研发过程中发布耗时，安装耗时等数据</li></ol><h3 id="脚手架开发流程" tabindex="-1">脚手架开发流程 <a class="header-anchor" href="#脚手架开发流程" aria-hidden="true">#</a></h3><ul><li>创建一个<code>npm</code>项目</li><li>创建脚手架入口文件，最上方添加</li></ul><div class="language-javascript"><pre><code><span class="token hashbang comment">#!/usr/bin/env node</span>
</code></pre></div><ul><li>配置<code>package.json</code>，添加<code>bin</code>属性</li><li>编写脚手架代码</li><li>发布脚手架</li></ul><h3 id="脚手架使用流程" tabindex="-1">脚手架使用流程 <a class="header-anchor" href="#脚手架使用流程" aria-hidden="true">#</a></h3><div class="language-shell"><pre><code><span class="token comment"># 安装脚手架</span>
<span class="token function">npm</span> <span class="token function">install</span> -g xxx-cli
<span class="token comment"># 使用脚手架</span>
xxx-cli
</code></pre></div><h3 id="脚手架开发难点" tabindex="-1">脚手架开发难点 <a class="header-anchor" href="#脚手架开发难点" aria-hidden="true">#</a></h3><ol><li>分包：将复杂模块拆分成各个模块</li><li>命令注册</li></ol><div class="language-shell"><pre><code>xxx-cli crete
xxx-cli <span class="token function">add</span>
vue-cli <span class="token punctuation">..</span>.
</code></pre></div><ol start="3"><li>参数解析</li></ol><div class="language-shell"><pre><code>xxx-cli <span class="token builtin class-name">command</span> <span class="token punctuation">[</span>options<span class="token punctuation">]</span> <span class="token operator">&lt;</span>params<span class="token operator">&gt;</span>
</code></pre></div><ol start="4"><li>命令行交互</li><li>日志打印</li><li>命令行输出变色</li><li>文件上传、下载</li></ol><h2 id="脚手架雏形" tabindex="-1">脚手架雏形 <a class="header-anchor" href="#脚手架雏形" aria-hidden="true">#</a></h2><ol><li>创建项目</li></ol><div class="language-shell"><pre><code><span class="token function">mkdir</span> cli
<span class="token builtin class-name">cd</span> cli 
<span class="token function">npm</span> init
</code></pre></div><ol start="2"><li>新建程序入口文件</li></ol><div class="language-shell"><pre><code><span class="token function">touch</span> cli.js
</code></pre></div><ol start="3"><li>在package.json中添加bin</li></ol><div class="language-json"><pre><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;cli&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;bin&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;xxx-cli&quot;</span><span class="token operator">:</span> <span class="token string">&quot;bin/cli.js&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;author&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;license&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ISC&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol start="4"><li>编辑cli.js</li></ol><div class="language-javascript"><pre><code><span class="token hashbang comment">#! /usr/bin/env node</span>

<span class="token comment">// 检查入口是否执行</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;cli working...&#39;</span><span class="token punctuation">)</span>
</code></pre></div><ol start="5"><li>添加软连接，输入<code>npm link</code></li><li>在命令行中输入cli</li></ol><h3 id="npm-link标准流程" tabindex="-1">npm link标准流程 <a class="header-anchor" href="#npm-link标准流程" aria-hidden="true">#</a></h3><p>链接本地脚手架</p><div class="language-shell"><pre><code><span class="token builtin class-name">cd</span> xxx-cli
<span class="token function">npm</span> <span class="token function">link</span>
</code></pre></div><p>取消链接本地库文件</p><div class="language-shell"><pre><code><span class="token builtin class-name">cd</span> xxx-cli
<span class="token function">npm</span> unlink
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">理解link</p><p>link的本质就是软链接</p><ul><li>npm link: 将当前目录链接到<code>node</code>全局<code>node_modules</code>中作为一个库文件，并解析<code>bin</code>配置的可可执行文件</li><li>npm link xxx: 将当前的<code>node_modules</code>下指定的库文件链接到<code>node</code>全局<code>node_modules</code>的xxx库文件</li></ul><p>unlink本质就是删除这条软链接</p><ul><li>npm unlink: 将当前项目从<code>node</code>全局<code>node_modules</code>中移除</li><li>npm unlink xxx: 将当前项目中的库文件依赖移除</li></ul></div><h3 id="命令行参数解析" tabindex="-1">命令行参数解析 <a class="header-anchor" href="#命令行参数解析" aria-hidden="true">#</a></h3><p>修改cli文件</p><div class="language-javascript"><pre><code><span class="token hashbang comment">#! /usr/bin/env node</span>

<span class="token comment">// 定义库文件</span>
<span class="token keyword">const</span> utils <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">init</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> option<span class="token punctuation">,</span> parma <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;init&#39;</span><span class="token punctuation">,</span> option<span class="token punctuation">,</span> parma<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 注册一个命令</span>
<span class="token keyword">const</span> argv <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;process&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>argv

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>argv<span class="token punctuation">)</span>


<span class="token keyword">const</span> command <span class="token operator">=</span> argv<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>

<span class="token keyword">const</span> options <span class="token operator">=</span> argv<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> <span class="token punctuation">[</span>option<span class="token punctuation">,</span> parma<span class="token punctuation">]</span> <span class="token operator">=</span> options

option <span class="token operator">=</span> option<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&#39;--&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;&#39;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>option<span class="token punctuation">,</span> parma<span class="token punctuation">)</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>utils<span class="token punctuation">[</span>command<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  utils<span class="token punctuation">[</span>command<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">{</span> option<span class="token punctuation">,</span> parma <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;无效的命令&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 检查入口是否执行</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;cli working...&#39;</span><span class="token punctuation">)</span>
</code></pre></div><p>命令行执行</p><div class="language-shell"><pre><code>xxx-cli init --name <span class="token builtin class-name">test</span>
</code></pre></div><p>就会输出 <code>init name cli-test</code></p><p>以上就实现了一个比较简单的命令行解析</p><h2 id="模块划分" tabindex="-1">模块划分 <a class="header-anchor" href="#模块划分" aria-hidden="true">#</a></h2><h3 id="引入lerna" tabindex="-1">引入lerna <a class="header-anchor" href="#引入lerna" aria-hidden="true">#</a></h3><p>虽然lerna不维护了，但是还是一个比较好的库管理库</p><p>lerna是用于管理具有多个包的 JavaScript 项目的工具。</p><p>lerna初始化过程</p><ol><li>安装learn: yarn add -D lerna</li><li>npx lerna init</li></ol><div class="language-shell"><pre><code>lerna notice cli v4.0.0
lerna info Updating package.json
lerna info Creating lerna.json
lerna info Creating packages directory
lerna success Initialized Lerna files
</code></pre></div><ol start="3"><li>创建模块: lerna crete xxx</li><li>安装依赖: lerna add xxx</li><li>重新安装依赖: lerna bootstarp</li></ol><h3 id="拆包" tabindex="-1">拆包 <a class="header-anchor" href="#拆包" aria-hidden="true">#</a></h3><ul><li>核心流程: core</li><li>命令: command <ul><li>初始化</li><li>发布</li><li>清除缓存</li></ul></li><li>模型层 models <ul><li>command命令</li><li>project项目</li><li>component组件</li><li>npm模块</li><li>git仓库</li></ul></li><li>支撑模块 utils <ul><li>git操作</li><li>云构建</li><li>工具方法</li><li>api请求</li></ul></li></ul><h3 id="core-模块" tabindex="-1">core 模块 <a class="header-anchor" href="#core-模块" aria-hidden="true">#</a></h3><p>命令行执行流程</p><ol><li>准备阶段</li></ol><ul><li>检查版本号</li><li>检查node版本</li><li>检查是否是root启动</li><li>检查用户主目录</li><li>检查入参</li><li>检查环境变量</li><li>检查是否为新版本 -&gt; 提示更新</li></ul><ol start="2"><li>命令注册</li></ol><ul><li>注册init命令</li><li>注册publish命令</li><li>注册clean命令</li><li>支持debug模式</li></ul><ol start="3"><li>命令执行</li></ol><div class="tip custom-block"><p class="custom-block-title">涉及库</p><p>核心库：</p><ul><li>commander</li></ul><p>工具库:</p><ul><li>npmlog 日志打印</li><li>fs-extra 文件库</li><li>semver 版本库对比</li><li>colors 颜色</li><li>user-home 检查是否是用户主目录</li><li>dotenv</li><li>root-check 权限降级</li></ul></div></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-fb8d84c6><div class="edit" data-v-fb8d84c6><div class="edit-link" data-v-fb8d84c6 data-v-1ed99556><!----></div></div><div class="updated" data-v-fb8d84c6><p class="last-updated" data-v-fb8d84c6 data-v-5797b537><span class="prefix" data-v-5797b537>上次编辑时间:</span><span class="datetime" data-v-5797b537></span></p></div></footer><!----><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"algorithm_data-structure_hashmap.md\":\"e9e1b150\",\"algorithm_data-structure_heap.md\":\"5379b789\",\"algorithm_data-structure_linkedlist.md\":\"299cc727\",\"algorithm_data-structure_queue.md\":\"bb690a95\",\"algorithm_data-structure_stack.md\":\"d90ed166\",\"algorithm_data-structure_tree.md\":\"c4003ca9\",\"algorithm_data-structure_index.md\":\"dedf6c65\",\"algorithm_index.md\":\"001abab6\",\"algorithm_topic_array.md\":\"e3caad30\",\"algorithm_topic_array_index.md\":\"08ca9fec\",\"algorithm_topic_linkedlist.md\":\"bb083470\",\"algorithm_topic_queue.md\":\"07e58983\",\"algorithm_topic_sort.md\":\"4076b960\",\"algorithm_topic_sort_doc_冒泡排序.md\":\"6703416d\",\"algorithm_topic_sort_doc_希尔排序.md\":\"84772499\",\"algorithm_topic_sort_doc_归并排序.md\":\"0a79012f\",\"algorithm_topic_sort_doc_快速排序.md\":\"e44e6c2d\",\"algorithm_topic_sort_doc_插入排序.md\":\"17d390c4\",\"algorithm_topic_sort_doc_选择排序.md\":\"d76decbc\",\"algorithm_topic_stack.md\":\"8c92e22b\",\"algorithm_topic_string.md\":\"7217e857\",\"algorithm_topic_tree.md\":\"cc41347a\",\"index.md\":\"45ea6dec\",\"interview_index.md\":\"b60628e9\",\"project_cli_index.md\":\"a0883a47\",\"project_ui_index.md\":\"39522aab\",\"react-analysis_index.md\":\"77eb9d4a\",\"typescript_basics_index.md\":\"efc8c577\",\"vue-analysis_index.md\":\"26b67c51\"}")</script>
    <script type="module" async src="/assets/app.65ddda17.js"></script>
    
  </body>
</html>